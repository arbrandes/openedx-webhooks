<!doctype html>
<html>
    <body>
        <h1>Open edX Webhooks Home</h1>
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <ul class="flashes">
    {% for category, message in messages %}
      <li class="{{ category }}">{{ message }}</li>
    {% endfor %}
    </ul>
  {% endif %}
{% endwith %}
    <p>This is an automated system that synchronizes several different services
       to make developing <a href="http://openedx.org">Open edX</a> more smooth.
       The code is open source and <a href="https://github.com/edx/openedx-webhooks">
       hosted on GitHub</a>.
    </p>
    <h2>GitHub</h2>
    <ul>
      <li>
        {% if github_username %}
        Authenticated as <strong>@{{github_username}}</strong>.
        <a href="{{ url_for("github.login") }}">Re-authenticate?</a>
        {% else %}
        <a href="{{ url_for("github.login") }}">Authenticate</a>
        {% endif %}
      </li>
      <li><a href="{{ url_for("github_views.rescan_get") }}">Rescan Pull Requests</a></li>
      <li><a href="{{ url_for("github_views.process_pr_get") }}">Process Pull Request</a></li>
      <li><a href="{{ url_for("github_views.generate_error") }}">Generate Error</a></li>
    </ul>
    <h2>JIRA</h2>
    <ul>
      <li>
        {% if jira_username %}
        Authenticated as <strong>{{jira_username}}</strong>.
        <a href="{{ url_for("jira.login") }}">Re-authenticate?</a>
        {% else %}
        <a href="{{ url_for("jira.login") }}">Authenticate</a>
        {% endif %}
      </li>
      <li><a href="{{ url_for("jira_views.rescan_issues_get") }}">Rescan Issues</a></li>
    </ul>
    </body>
</html>
